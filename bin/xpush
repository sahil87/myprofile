#!/bin/bash
# Push files helper
OLDDIR=`pwd`

if [ -z $1 ]
then
    COMMIT_MESSAGE="Pushing latest profile/blog changes"
else
    COMMIT_MESSAGE="${@}"
fi

commit_dir () {
  cd $1
  git status --porcelain
  #0 if no changes, 1 if changes to commit
  CHANGES_EXIST=$?
  if [ "$CHANGES_EXIST" -eq 0 ];
  then

    git add --all :/
    git commit -m "$2"
    git push
  else
    echo "No changes to commit in $1"
  fi
}

commit_dir $MYPROFILEDIR "$COMMIT_MESSAGE"
commit_dir $LIFETRACKERDIR "$COMMIT_MESSAGE"
commit_dir $BLOGDIR "$COMMIT_MESSAGE"
cd $OLDDIR
