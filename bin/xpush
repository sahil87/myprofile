#!/bin/bash
# Push files helper

# Add directories here:
DIRS=(
  $MYPROFILE_DIR
  $LIFETRACKER_DIR
  $BLOG_DIR
  $DEVSHELL_DIR
  $PP_DIR
)

COMMIT_MESSAGE="${*:-Pushing latest profile/blog changes}"

commit_dir() {
  cd "$1" || return
  if [ -n "$(git status --porcelain)" ]; then
    echo "Adding and committing files in $1"
    git add --all :/
    git commit -m "$2"
    git pull --rebase && git push
  else
    echo "No changes to commit in $1"
  fi
}

for dir in "${DIRS[@]}"; do
  commit_dir "$dir" "$COMMIT_MESSAGE"
done
