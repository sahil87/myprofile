#!/bin/bash
OLDDIR=`pwd`
MYPROFILEDIR="$(realpath "$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/.." )"
LIFETRACKERDIR="$(realpath "$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/../../lifetracker" )"

if [ -z $1 ]
then
    COMMIT_MESSAGE="Pushing latest myprofile changes"
else
    COMMIT_MESSAGE="${@}"
fi

commit_dir () {
  git add --all :/
  git commit -m "$1"
  git push
}

set -x
cd $MYPROFILEDIR
commit_dir ${COMMIT_MESSAGE}
$LIFETRACKERDIR
commit_dir ${COMMIT_MESSAGE}
cd $BLOGDIR
commit_dir ${COMMIT_MESSAGE}
cd $OLDDIR
